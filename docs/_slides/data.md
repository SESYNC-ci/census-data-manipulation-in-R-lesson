---
# empflag for NA strings
#
---

## Sample data

To learn about data transformation with dplyr, we need more data. The [County Business Patterns (CBP) dataset] provides subnational economic data by industry. The annual series includes the number of establishments, employment, and payroll.

[County Business Patterns (CBP) dataset]: https://www.census.gov/programs-surveys/cbp/data/datasets.html

===

![]({{ site.baseurl }}/images/data.jpg){: width="60%"}  
*Credit: [US Census Bureau](https://www.census.gov/programs-surveys/cbp.html)*
{:.captioned}

===

The [CBP dataset documentation] explains the variables. The key variables we use in this lesson are ## FIXME
{:.notes}

[CBP dataset documentation]: https://www2.census.gov/programs-surveys/rhfs/cbp/technical%20documentation/2015_record_layouts/county_layout_2015.txt


~~~r
library(data.table)
cbp <- fread('data/cbp15co.csv')
~~~
{:.text-document title="{{ site.handouts[0] }}"}

~~~r
str(cbp)
~~~
{:.input}
~~~
Classes 'data.table' and 'data.frame':	2126601 obs. of  26 variables:
 $ FIPSTATE: chr  "01" "01" "01" "01" ...
 $ FIPSCTY : chr  "001" "001" "001" "001" ...
 $ NAICS   : chr  "------" "11----" "113///" "1133//" ...
 $ EMPFLAG : chr  "" "" "" "" ...
 $ EMP_NF  : chr  "G" "H" "H" "H" ...
 $ EMP     : int  10454 70 70 70 70 70 0 0 0 0 ...
 $ QP1_NF  : chr  "G" "H" "H" "H" ...
 $ QP1     : int  76437 790 790 790 790 790 0 0 0 0 ...
 $ AP_NF   : chr  "G" "H" "H" "H" ...
 $ AP      : int  321433 3566 3551 3551 3551 3551 0 0 0 0 ...
 $ EST     : int  844 7 6 6 6 6 1 1 1 1 ...
 $ N1_4    : int  430 5 4 4 4 4 1 1 1 1 ...
 $ N5_9    : int  171 1 1 1 1 1 0 0 0 0 ...
 $ N10_19  : int  118 0 0 0 0 0 0 0 0 0 ...
 $ N20_49  : int  81 0 0 0 0 0 0 0 0 0 ...
 $ N50_99  : int  35 1 1 1 1 1 0 0 0 0 ...
 $ N100_249: int  6 0 0 0 0 0 0 0 0 0 ...
 $ N250_499: int  2 0 0 0 0 0 0 0 0 0 ...
 $ N500_999: int  1 0 0 0 0 0 0 0 0 0 ...
 $ N1000   : int  0 0 0 0 0 0 0 0 0 0 ...
 $ N1000_1 : int  0 0 0 0 0 0 0 0 0 0 ...
 $ N1000_2 : int  0 0 0 0 0 0 0 0 0 0 ...
 $ N1000_3 : int  0 0 0 0 0 0 0 0 0 0 ...
 $ N1000_4 : int  0 0 0 0 0 0 0 0 0 0 ...
 $ CENSTATE: chr  "63" "63" "63" "63" ...
 $ CENCTY  : chr  "001" "001" "001" "001" ...
 - attr(*, ".internal.selfref")=<externalptr> 
~~~
{:.output}

===

Modify the function to specify what string in the CSV file represents NAs, a.k.a. data that is not-available or missing.


~~~r
cbp <- fread(
  'data/cbp15co.csv',
  na.strings = '')
~~~
{:.text-document title="{{ site.handouts[0] }}"}

===

Question
: What changed?

Answer
: {:.fragment} Using `str()` shows that the character string "" in the CSV file is read into R as missing data (an `NA`) rather than the value `''`.
